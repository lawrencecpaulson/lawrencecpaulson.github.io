---
layout: post
title:  "Adding Zermelo-Fraenkel set theory to higher-order logic"
usemathjax: true 
tags: set theory, ZFC_in_HOL, ZFC, Isabelle/ZF
---

Many researchers, frustrated with the limited expressiveness of higher-order logic vis-à-vis Zermelo Frankel [set theory](https://plato.stanford.edu/entries/set-theory/), have sought somehow to combine the two.
The difficulty is to make the combination seamless, yielding a unified formal theory: not two theories bolted together.
We don't want to keep transferring facts, constructions and proofs from one theory to the other.

### Gordon's HOL-ST

Higher-order logic was popularised by the late, great Mike Gordon ([bio](https://royalsocietypublishing.org/doi/10.1098/rsbm.2018.0019), also [here](https://arxiv.org/abs/1806.04002)),
and it was he who first tried to extend it with ZFC.
His [HOL-ST](https://rdcu.be/cJhwy) simply introduced a type
$V$ of all sets and a relation ${\in} : V\times V \to \textrm{bool}$, then asserted all the Zermelo-Fraenkel axioms.
He remarks

> The resulting theory has a consistency strength stronger than ZF, because one can define inside it a semantic function from a concrete type representing first order formulae to $V$ such that all the theorems of ZF can be proved. However, a model for higher order logic plus V can be constructed in ZF with one inaccessible cardinal. Thus the strength of higher order logic augmented with ZF-like axioms for $V$ is somewhere between ZF and ZF plus one inaccessible cardinal.

He credits these claims to the equally legendary [Ken Kunen](https://hilbert.math.wisc.edu/node/829).
As a demonstration of the system's power, Sten Agerholm formalised Dana Scott's inverse limit construction of the set $D_\infty$, satisfying

$$
\begin{align*}
 D_\infty \cong [D_\infty\to D_\infty]
\end{align*}
$$

and yielding a model of the untyped $\lambda$-calculus.
Gordon also describes a construction of the list datatype using set theory. However, this experiment was not continued, with little attempt to integrate the set theory and higher-order logic worlds.

### Oboa's HOLZF

About 10 years later, Steven Obua performed a similar experiment with Isabelle/HOL. [His paper](https://rdcu.be/cJDx2) on HOLZF begins with some amusing remarks:

> The actual viability and how-to of the approach was brought to the attention of the author by Bob Solovay who outlined HOLZF on the Isabelle mailing list and claimed that “for certain reasons he needed such a monster”, opposing Larry Paulson’s remark that HOLZF might be “too much of a good thing”. Bob Solovay also provided a proof of the consistency of HOLZF relative to the consistency of ZFC + ’there is an inaccessible cardinal’.

It seems that set theorists agree about the proof-theoretic strength of this "monster". Obua adopted the same axioms and overall approach as Gordon, and demonstrated his system by formalising John H Conway's *partizan games*, the basis of the so-called [surreal numbers](https://www.cut-the-knot.org/WhatIs/Infinity/SurrealNumbers.shtml).

Importantly, Obua was able to rely on much of the existing infrastructure of Isabelle/HOL, such as its recursive function definitions.
He also maked significant strides towards integrating ZFC with higher-order logic, introducing a function (like  `elts` below) to map a ZF set to the HOL set of its elements. Then he introduced the polymorphic type `'a zet` of typed sets that are "small": i.e., embeddable into some ZF set.

HOLZF is the basis for one of the several formalisations of category theory in the Archive of Formal Proofs. Sadly, none of these formalisations have been used except to formalise even more category theory.

### My own ZFC_in_HOL
 
My work in this area was inspired by Obua's and is logically equivalent, but designed to develop ZFC with a minimum of additional vocabulary and maximum integration with higher-order logic. The presentation (refined by [Dmitriy Traytel](https://di.ku.dk/english/staff/?pure=en/persons/682552)), introduces a type `V`, a function `elts` of type `V set` and the ZF axioms for the construction of sets. Something is a set iff it is an element of another set, i.e. if it is contained in the range of `elts`. I also define the predicate `small`, analogous to Obua's `'a zet` but not a type: it characterises those sets (of the standard Isabelle/HOL set type, `'a set` that can be put in 1-1 correspondence with the elements of some ZF set.

No membership relation is required because one can simply write <span class="bound">x</span> <span class="main">∈</span> <span class="free">elts</span> <span class="bound">y</span>.
No symbols for union, intersection or the subset are required, since we can overload the type classes `distrib_lattice` (distributive lattices, covering $\subseteq$, $\cup$, $\cap$) and `conditionally_complete_lattice` (covering general unions and intersections).
The only penalty for using this overloading is a non-standard syntax: $\le$ for subset, $\sqcup$ for union, etc. Further type class instantiations define 0 and 1 to denote the obvious natural numbers (0 is also the empty set).
[Addition and multiplication of sets](https://doi.org/10.1002/malq.200610026) is also defined, allowing instantiation of the type classes stating that both $(0,{+})$ and $(1,{\times})$ are monoids.
These definitions extend the usual ordinal arithmetic, as I have [mentioned earlier]({% post_url 2022-02-23-Hereditarily_Finite %}).

Also included, largely material borrowed from Isabelle/ZF: ordinal exponentiation and Cantor normal form, cardinals and cardinal arithmetic, $\aleph$-notation for cardinals, transfinite induction and recursion, order types and many other odds and ends.


XXXXXX

[previous post]({% post_url 2022-01-26-Set_theory %}) 

ZF set theory turns out to be surprisingly close in strength to the calculus of inductive constructions (CIC), the type theory implemented by Coq and Lean.

Isabelle has supported first-order logic and set theory as early as the 1990s. Isabelle/ZF is a separate instance
